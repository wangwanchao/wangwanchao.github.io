---
title: 架构中的网关
date: 2019-03-23 12:45:47
tags: Architecture
categpries: Architecture
---
网关在微服务中的应用

特性：

认证、鉴权、缓存、服务编排、监控告警

权限分级、流量管控、超时熔断

<!-- more -->

场景：

## 组件对比 ##

### Nginx ###

原理：异步非阻塞


### Zuul ###

#### 特性 ####

身份认证与安全：识别每个资源的验证要求，并拒绝那些与要求不符的请求。

审查与监控：与边缘位置追踪有意义的数据和统计结果，从而带来精确的生产视图。

动态路由：动态地将请求路由到不同的后端集群。

压力测试：逐渐增加指向集群的流量，以了解性能。

负载分配：为每一种负载类型分配对应容量，并弃用超出限定值的请求。

静态响应处理：在边缘位置直接建立部分响应，从而避免其转发到内部集群。

多区域弹性：跨越 AWS Region 进行请求路由，旨在实现 ELB（Elastic Load Balancing，弹性负载均衡）使用的多样化，以及让系统的边缘更贴近系统的使用者。

zuul1 

原理：阻塞+多线程的过滤器，线程激增

zuul2

异步非阻塞，事件+回调

高可用方案：

> zuul集群 + eureka server
> Nginx/HAproxy/F5 + zuul

### Linkerd ###

### Envoy ###

### Undertow ###

### Spring Cloud Gateway ###