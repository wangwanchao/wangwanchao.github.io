---
title: mysql分库分表技术
date: 2018-09-17 17:24:13
tags: MySQL
categories: MySQL
---
分库分表主要针对大流量用户网站，但是作为有追求的程序员，还是要熟悉理论，用的时候方便快速上手解决业务问题，毕竟生活主要还是Crud Boy

<!-- more --> 

## 分库分表

### 垂直分表


### 垂直分库


#### 问题

1. 跨库join问题
	
	拆库后数据可能分布在不同的实例、物理主机，基于安全，一般禁止跨库join操作。
	
	解决方案：
	
	1)、全局表：即字典表，所有可能关联表。将这些表在每个数据库保存一份，
	
	2)、字段冗余：不同的表保存一些关联表的字段，可能导致‘数据一致性’问题，因为要在不同的表维护相同的字段
	
	3)、 数据同步：
	
	4)、系统层组装：即通过代码组装处理数据，for循环可能导致循环RPC问题，循环查询数据库，连接费时。建议一次查询返回所有结果。

2. 跨库事务问题(分布式事务)
	
	



### 水平分表/横向分表



### 水平分库分表

1. 查询切分 将ID和库映射关系放在单独的主库中
2. 范围切分 按照时间区间/ID区间切分
3. Hash切分 取模切分









