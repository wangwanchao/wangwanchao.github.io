---
title: 第一天
date: 2020-10-01 17:20:05
tags:
categories: OS
---
我真的是太喜欢操作系统了，尤其是从退出`vim`的那一刻起，可能越是得不到的越有味道吧。最开始接触手写操作系统是从《x86汇编语言:从实模式到保护模式》开始的，实操能力还是不太行，后来接触到《30天自制操作系统》，这本书主要是在win系统下实现，我现在想在Deepin上实践，就需要很多的魔改，也会对整个过程理解的更深刻。
大家都知道电脑上的系统从根本上还是基于一系列软件，安装在硬盘上。启动过程也是基于硬盘加载启动程序。而这个核心的存储区域就是"引导区"。有grub引导，UFEI引导。

学习系统的开始阶段的核心就是这个引导区。

<!-- more -->
## 基础
### FAT12
软盘格式。Windows和MS-DOS格式化软盘就是按照这种格式进行的。

### 启动区/引导区
软盘的的第一个扇区(sector)作为启动区。系统启动过程从第一个扇区开始读数据，检查第一个扇区最后的2个字节`55 AA`，如果正确则认为该扇区是`启动区`，如果不是`55 AA`就会报错无法启动，所以必须保证最后2个字节为正确的。
扇区：计算机以512 byte为单位读取，而不是以单字节为单位。512 byte就是一个扇区。

#### 启动程序加载器
IPL。启动区只有512字节，实际的操作系统，像Windows、Linux都远远超过了这个数量。所以完整的系统加载程序放在别的扇区，只把最开始的加载程序放在第一个扇区。

## 汇编
TIMES: 填充指定字节的'0'。
'DB': 填充1个字节。例如：`DB 0`会填充1个字节的'0'。
'DW': 填充1个字，等于2个字节。
'DD': 填充2个字，等于4个字节。
'$': 当前位置的字节地址。
'$$': 文件开始的字节地址。

## 工具
### NASM
汇编编译器

### Bochs

### Qemu
[qemu下载地址](https://www.qemu.org/download/)

QEMU是一款运行模拟器，

#### Linux安装
Deepin系统
apt安装
```
apt-get install qemu
```
编译安装
```
xz -d
tar -xvf
cd $QEMU_HOME
./configure
make 
make install
```