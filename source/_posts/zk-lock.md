---
title: ZooKeeper分布式锁(六)
date: 2019-06-06 13:36:37
tags: ZooKeeper
categpries: ZooKeeper
---
zk典型的应用是可以作为分布式锁。

<!-- more -->
## zk分布式锁的特性
zk作为分布式锁主要利用的还是临时节点、顺序性的特性

1. 最多只有一个获取锁：最多只有一个进程获取锁
2. 释放锁：获取锁的进程可以主动释放锁；进程宕机后也可以释放锁
3. 锁重入：获取锁的进程在释放锁之前可以重新进入
4. 感知释放锁：等待锁的进程可以感知到锁的释放，并且重新竞争锁

## 锁实现

### 公平式锁
基于临时节点 + 顺序性，这样创建相同的节点时，都可以创建成功，但是节点具有顺序性，每个获取锁的进程判断自己是否是最小顺序的节点来获取锁

### 非公平式锁
基于临时节点 + 非顺序性，这样创建相同的节点时，只能有一个创建成功，即获得锁

### 排他锁

### 共享锁